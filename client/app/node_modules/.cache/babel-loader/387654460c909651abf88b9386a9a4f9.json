{"ast":null,"code":"import axios from \"axios\";\n\nconst login = async event => {\n  console.log('loging');\n  event.preventDefault();\n  console.table({\n    username: event.target.username.value,\n    password: event.target.password.value\n  });\n  const loginData = {\n    username: event.target.username.value,\n    password: event.target.password.value\n  };\n\n  if (loginData.username && loginData.password) {\n    return await axios.post(`http://localhost:3001/api/auth/login`, loginData).then(result => {\n      document.cookie = \"sessionid=\" + result.data;\n      if (result.status === 200) return true;else return false;\n    });\n  }\n};\n\nconst validateSession = sessionId => {\n  return axios.get(`http://localhost:3001/api/auth/${sessionId}`).then(result => {\n    if (result.status === 200) return true;else return false;\n  });\n};\n\nconst logout = () => {\n  if (document.cookie.sessionId) {\n    window.onbeforeunload(() => {// axios.get(`/api/auth/logout/${document.cookie.sessionId}`);\n    });\n  }\n};\n\nexport default login;\nexport { validateSession, logout };","map":{"version":3,"sources":["E:/Node Projects/ReactApp/Projekt_2/client/app/src/Elements/login.js"],"names":["axios","login","event","console","log","preventDefault","table","username","target","value","password","loginData","post","then","result","document","cookie","data","status","validateSession","sessionId","get","logout","window","onbeforeunload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AACA,MAAMC,KAAK,GAAG,MAAOC,KAAP,IAAiB;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACFF,EAAAA,KAAK,CAACG,cAAN;AACAF,EAAAA,OAAO,CAACG,KAAR,CAAc;AAACC,IAAAA,QAAQ,EAAEL,KAAK,CAACM,MAAN,CAAaD,QAAb,CAAsBE,KAAjC;AAAwCC,IAAAA,QAAQ,EAAER,KAAK,CAACM,MAAN,CAAaE,QAAb,CAAsBD;AAAxE,GAAd;AACA,QAAME,SAAS,GAAG;AAChBJ,IAAAA,QAAQ,EAAEL,KAAK,CAACM,MAAN,CAAaD,QAAb,CAAsBE,KADhB;AAEhBC,IAAAA,QAAQ,EAAER,KAAK,CAACM,MAAN,CAAaE,QAAb,CAAsBD;AAFhB,GAAlB;;AAIA,MAAIE,SAAS,CAACJ,QAAV,IAAsBI,SAAS,CAACD,QAApC,EAA8C;AAC5C,WAAO,MAAMV,KAAK,CAACY,IAAN,CAAY,sCAAZ,EAAmDD,SAAnD,EACTE,IADS,CACFC,MAAD,IAAY;AACjBC,MAAAA,QAAQ,CAACC,MAAT,GAAkB,eAAeF,MAAM,CAACG,IAAxC;AACA,UAAIH,MAAM,CAACI,MAAP,KAAkB,GAAtB,EAA2B,OAAO,IAAP,CAA3B,KACK,OAAO,KAAP;AACN,KALS,CAAb;AAMD;AACF,CAhBD;;AAkBA,MAAMC,eAAe,GAAIC,SAAD,IAAe;AACrC,SAAOpB,KAAK,CAACqB,GAAN,CAAW,kCAAiCD,SAAU,EAAtD,EACJP,IADI,CACGC,MAAD,IAAY;AACjB,QAAIA,MAAM,CAACI,MAAP,KAAkB,GAAtB,EAA2B,OAAO,IAAP,CAA3B,KACK,OAAO,KAAP;AACN,GAJI,CAAP;AAKD,CAND;;AAQA,MAAMI,MAAM,GAAG,MAAM;AACnB,MAAIP,QAAQ,CAACC,MAAT,CAAgBI,SAApB,EAA+B;AAC7BG,IAAAA,MAAM,CAACC,cAAP,CAAsB,MAAM,CAC1B;AACD,KAFD;AAGD;AACF,CAND;;AAQA,eAAevB,KAAf;AACA,SAAQkB,eAAR,EAAyBG,MAAzB","sourcesContent":["import axios from \"axios\";\r\nconst login = async (event) => {\r\n    console.log('loging');\r\n  event.preventDefault();\r\n  console.table({username: event.target.username.value, password: event.target.password.value});\r\n  const loginData = {\r\n    username: event.target.username.value,\r\n    password: event.target.password.value\r\n  }\r\n  if (loginData.username && loginData.password) {\r\n    return await axios.post(`http://localhost:3001/api/auth/login`, loginData)\r\n       .then( (result) => {\r\n         document.cookie = \"sessionid=\" + result.data;\r\n         if (result.status === 200) return true\r\n         else return false\r\n       })\r\n  }\r\n}\r\n\r\nconst validateSession = (sessionId) => {\r\n  return axios.get(`http://localhost:3001/api/auth/${sessionId}`)\r\n    .then( (result) => {\r\n      if (result.status === 200) return true\r\n      else return false\r\n    })\r\n}\r\n\r\nconst logout = () => {\r\n  if (document.cookie.sessionId) {\r\n    window.onbeforeunload(() => {\r\n      // axios.get(`/api/auth/logout/${document.cookie.sessionId}`);\r\n    })\r\n  }\r\n}\r\n\r\nexport default login;\r\nexport {validateSession, logout};"]},"metadata":{},"sourceType":"module"}